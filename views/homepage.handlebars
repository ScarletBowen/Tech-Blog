<header d-flex justify-content-between align-items-center class="p-4 c-heading u-xlarge">
  <h1><a href="/">The Tech Blog</a></h1>
</header>

<section class="blog-posts">
  {{#each blogs}}
    <div class="card">
      <div class="card-header">
        <h3>{{title}}</h3>
      </div>

      <div class="card-body">
        <p>{{content}}</p>
      </div>

      <div class="card-footer">
        <p>Created by {{user.username}} on {{format_date date_created}}</p>
      </div>

      {{#if comments.[this.id]}}
        <div class="comments">
          {{> comments comments.[this.id]}}
        </div>
      {{/if}}

      <div class="comment-form" data-blog-id="{{this.id}}" style="display: none;">
        <form action="/blog/{{this.id}}/comment" method="POST">
          <textarea class="comment-text" name="comment-content" placeholder="Write a comment"></textarea>
          <input type="hidden" name="blog-id" value="{{this.id}}">
          <button class="c-button c-button--info" type="submit">Submit</button>
        </form>
      </div>

      <button type="button" class="c-button add-comment-btn u-small" data-blog-id="{{this.id}}">Add Comment</button>

      {{#if comments.[this.id]}}
      <div class="comments">
        <h4>Comments</h4>
        {{#each comments.[this.id]}}
          <div class="comment">
            <p><strong>{{user.username}}</strong>: {{comment_text}}</p>
          </div>
        {{/each}}
      </div>
      {{/if}}
    </div>
  {{/each}}
</section>
<script src="https://cdn.jsdelivr.net/npm/handlebars/dist/handlebars.min.js"></script>
<script src="/js/comment.js"></script>

